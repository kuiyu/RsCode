import{_ as s,c as i,o as a,a4 as n}from"./chunks/framework.CI8or701.js";const o=JSON.parse('{"title":"微信平台SDK","description":"微信平台SDK简介","frontmatter":{"home":false,"editLink":false,"lang":"zh-CN","title":"微信平台SDK","description":"微信平台SDK简介"},"headers":[],"relativePath":"wx/readme.md","filePath":"wx/readme.md","lastUpdated":1713227600000}'),h={name:"wx/readme.md"},e=n(`<h2 id="sdk说明" tabindex="-1">SDK说明 <a class="header-anchor" href="#sdk说明" aria-label="Permalink to &quot;SDK说明&quot;">​</a></h2><p><code>RsCode.WeChat</code> 是河南软商网络科技有限公司开发的微信平台SDK，使用.net技术封装微信业务API,实现快速开发微信平台相关业务。</p><p>RsCode.WeChat需要在.net6及以上的环境中运行</p><h3 id="当前版本" tabindex="-1">当前版本 <a class="header-anchor" href="#当前版本" aria-label="Permalink to &quot;当前版本&quot;">​</a></h3><ul><li>正式发布: <a href="https://www.nuget.org/packages/RsCode.WeChat/" target="_blank" rel="noreferrer"><img src="https://img.shields.io/nuget/v/RsCode.WeChat.svg?color=red&amp;style=flat-square" alt="RsCode.WeChat"></a></li></ul><h3 id="源码托管" tabindex="-1">源码托管 <a class="header-anchor" href="#源码托管" aria-label="Permalink to &quot;源码托管&quot;">​</a></h3><ul><li><p><a href="https://gitee.com/kuiyu/RsCode.WeChat/" target="_blank" rel="noreferrer">Gitee</a></p></li><li><p><a href="https://github.com/kuiyu/RsCode.WeChat/" target="_blank" rel="noreferrer">GitHub</a></p></li></ul><h2 id="快速入门" tabindex="-1">快速入门 <a class="header-anchor" href="#快速入门" aria-label="Permalink to &quot;快速入门&quot;">​</a></h2><p>项目中引用<code>RsCode.WeChat</code>，Program.cs中</p><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AspectCore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Extensions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DependencyInjection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.Host.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UseServiceProviderFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DynamicProxyServiceProviderFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//添加微信服务 </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">builder.Services.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddWeChat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//添加微信服务中间件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UseWeChat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>调用微信API</p><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HomeController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ControllerBase</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    IWeChatClient</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> wechat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    IWechatTokenManager</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> wechatTokenManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HomeController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IWeChatClient</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _wechat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IWechatTokenManager</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _wechatTokenManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        wechat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">_wechat;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        wechatTokenManager</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">_wechatTokenManager;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Task</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> appId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wx1323123412&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        wechat.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UseAppId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(appId)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> accessToken</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> wechatTokenManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetAccessTokenAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(appId);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> wechat.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SendAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">JsapiTicketResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> JsapiTicketRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(accessToken));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div>`,12),t=[e];function l(p,k,r,d,E,g){return a(),i("div",null,t)}const y=s(h,[["render",l]]);export{o as __pageData,y as default};
